library(tidyverse)
library(readxl)
df <- read_excel("input/DataDownload - Copy.xlsx", 2)
df <- read_excel("input/DataDownload - Copy.xlsx", 2)
# str(df)
df %>% distinct(`Category Name`)
# str(df)
df %>% distinct(`Category Code`)
# str(df)
df %>% distinct(`Category Code`) %>% pull(`Category Code`)
# str(df)
worksheet <- df %>% distinct(`Category Code`) %>% pull(`Category Code`)
for (sheet in worksheet){
df_name <- paste('df',sheet,sep='_')
df_name <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheet)
}
for (sheet in worksheet){
# df_name <- paste('df',sheet,sep='_')
print(paste('df',sheet,sep='_'))
paste('df',sheet,sep='_') <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheet)
}
for (sheets in worksheet){
# df_name <- paste('df',sheet,sep='_')
print(paste('df',sheet,sep='_'))
paste('df',sheet,sep='_') <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
for (sheets in worksheet){
# df_name <- paste('df',sheet,sep='_')
print(paste('df',sheets,sep='_'))
paste('df',sheet,sep='_') <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
# paste('df',sheet,sep='_') <-
read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
# paste('df',sheet,sep='_') <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
for (sheets in worksheet){
df_name <- paste('df',sheet,sep='_')
print(df_name)
# paste('df',sheet,sep='_') <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
df_name <- paste('df',sheets,sep='_')
for (sheets in worksheet){
df_name <- paste('df',sheets,sep='_')
print(df_name)
# paste('df',sheet,sep='_') <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
for (sheets in worksheet){
df_name <- paste('df',sheets,sep='_')
print(df_name)
df_name <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
for (sheets in worksheet){
df_name <- paste('df',sheets,sep='_')
print(df_name)
paste(df_name) <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
for (sheets in worksheet){
df_name <- paste('df',sheets,sep='_')
print(df_name)
assign(paste(df_name), read_excel("input/DataDownload - Copy.xlsx", sheet = sheets))
# df_name <- read_excel("input/DataDownload - Copy.xlsx", sheet = sheets)
}
library(tidyverse)
library(readxl)
df <- read_excel("input/DataDownload - Copy.xlsx", 2)
worksheet <- df %>% distinct(`Category Code`) %>% pull(`Category Code`)
for (sheets in worksheet){
df_name <- paste('df',sheets,sep='_')
print(df_name)
assign(paste(df_name), read_excel("input/DataDownload - Copy.xlsx", sheet = sheets))
}
install.packages('devtools')
library(urbnmapr)
install.packages('urbnmapr')
devtools::install_github("UrbanInstitute/urbnmapr")
devtools::install_github("UrbanInstitute/urbnmapr")
library(urbnmapr)
devtools::install_github("UrbanInstitute/urbnmapr")
library(urbnmapr)
require("devtools")
devtools::install_github("UrbanInstitute/urbnmapr")
library(leaflet) # Plot maps
install.packages('leaflet')
library(leaflet) # Plot maps
library(tidyverse)
library.instal('tidyverse')
library.install('tidyverse')
install.library('tidyverse')
install.packages('tidyverse')
install.packages('readxl')
install.packages('leaflet')
install.packages('rgdal')
library(tidyverse)
library(readxl)
library(leaflet) # Plot maps
library(rgdal)
df <- read_excel("input/DataDownload - Copy.xlsx", 2)
worksheet <- df %>% distinct(`Category Code`) %>% pull(`Category Code`)
for (sheets in worksheet){
df_name <- paste('df',sheets,sep='_')
# print(df_name)
assign(paste(df_name), read_excel("input/DataDownload - Copy.xlsx", sheet = sheets))
}
state_data <- read_excel("input/DataDownload - Copy.xlsx", 4)
us.map.state <- readOGR(dsn= 'input/states_21basic', layer = "states", stringsAsFactors = FALSE)
us.map.state <- us.map.state[!us.map.state$STATE_FIPS %in% c("02","15","72", "66", "78", "60", "69","64", "68", "70", "74"),]
us.map.state <- us.map.state[!us.map.state$STATE_FIPS %in% c("81", "84", "86", "87", "89", "71", "76","95", "79"),]
us.map.county <- readOGR(dsn= 'input/UScounties', layer = "UScounties", stringsAsFactors = FALSE)
us.map.county <- us.map.county[!us.map.county$STATE_FIPS %in% c("02", "15", "72", "66", "78", "60", "69","64", "68", "70", "74"),]
us.map.county <- us.map.county[!us.map.county$STATE_FIPS %in% c("81", "84", "86", "87", "89", "71", "76","95", "79"),]
test_state_data <- select(state_data[complete.cases(state_data), ],StateFIPS,'State Population, 2009') %>% mutate(popu=as.character(`State Population, 2009`))
names(test_state_data)[2] <- 'population'
leafmap2 <- merge(us.map.state, test_state_data, by.x= 'STATE_FIPS', by.y='StateFIPS')
popup_dat2 <- paste0("<strong>State: </strong>",
leafmap2$STATE_NAME,
"<br><strong>State Population, 2009 : </strong>",
leafmap2$popu)
pal <- colorNumeric("Spectral", NULL, n = 13)
leaflet(data = leafmap2) %>%
addTiles() %>%
addPolygons(fillColor = ~pal(population),
fillOpacity = 0.8,
color = "#BDBDC3",
weight = 1,
popup = popup_dat2) %>%
addLegend("bottomright", pal = pal, values = ~population,
title = "State Population, 2009",
opacity = 1 )
test_county_data <- select(df_RESTAURANTS,FIPS,FFR14) %>% mutate(FFR14_chr=as.character(FFR14))
leafmap3 <- merge(us.map.county, test_county_data, by.x= 'FIPS', by.y='FIPS')
popup_dat3 <- paste0("<strong>County: </strong>",
leafmap3$NAME,
"<br><strong>Fast-food restaurants, 2014 : </strong>",
leafmap3$FFR14_chr)
pal <- colorQuantile("Spectral", NULL, n = 10)
leaflet(data = leafmap3) %>%
addTiles() %>%
addPolygons(fillColor = ~pal(FFR14),
fillOpacity = 0.8,
color = "#BDBDC3",
weight = 1,
popup = popup_dat3)
library(shiny); runApp('wei_xian.R')
runApp('wei_xian.R')
runApp('wei_xian.R')
runApp('wei_xian.R')
library(shiny); runApp('wei_xian.R')
popup_dat2 <- paste0("<strong>State: </strong>",
leafmap2$STATE_NAME,
"<br><strong>State Population, 2009 : </strong>",
leafmap2$popu)
pal <- colorNumeric("Spectral", NULL, n = 13)
leaflet(data = leafmap2) %>%
addTiles() %>%
addPolygons(fillColor = ~pal(population),
fillOpacity = 0.8,
color = "#BDBDC3",
weight = 1,
popup = popup_dat2) %>%
addLegend("bottomright", pal = pal, values = ~population,
title = "State Population, 2009",
opacity = 1 )
library(tidyverse)
library(readxl)
library(leaflet) # Plot maps
library(rgdal)
popup_dat2 <- paste0("<strong>State: </strong>",
leafmap2$STATE_NAME,
"<br><strong>State Population, 2009 : </strong>",
leafmap2$popu)
pal <- colorNumeric("Spectral", NULL, n = 13)
leaflet(data = leafmap2) %>%
addTiles() %>%
addPolygons(fillColor = ~pal(population),
fillOpacity = 0.8,
color = "#BDBDC3",
weight = 1,
popup = popup_dat2) %>%
addLegend("bottomright", pal = pal, values = ~population,
title = "State Population, 2009",
opacity = 1 )
runApp('wei_xian.R')
